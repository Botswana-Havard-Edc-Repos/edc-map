{% extends 'edc_base/base.html' %}

{% load staticfiles %}
{% load crispy_forms_tags %}

{% block extra-scripts %}
	{{ block.super }}
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.13/css/dataTables.bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script type="text/javascript">
	$(document).ready(function() {
	    $('#item-identifiers').DataTable();
	} );
	</script>
{% endblock extra-scripts %}


{% block main %}
<div class="container">

    <div id="div-home-right" class="col-md-8">
         <div class="panel panel-default">
		    <div class="panel-heading"><h4>Create Section</h4></div>
			    <div class="panel-body">
				     <a href="{% url 'edc_map:item_division_url' map_area %}?set_container=set_container" role="button" class="btn btn-primary">Create Containers</a>
			 	 </div>
        </div>
     </div>
     <div id="div-home-right" class="col-md-4">
        <div class="panel panel-warning">
        <div class="panel-heading">Administration</div>
	        <div class="panel-body">
		        <ul class="nav nav-pills nav-stacked">
		        <li><a role="button" class="btn btn-sm btn-default btn-block" href="{% url 'edc_map:edc_map_admin:index' %}">Map Admin</a></li>
		        <li><a role="button" class="btn btn-sm btn-default btn-block" href="{% url 'edc_map:item_client_allocation_url' %}">Item Allocations</a></li>
		        </ul>
	        </div>
        </div>
    </div>
     <div id="div-home-right" class="col-md-8">
         <div class="panel panel-default">
		    <div class="panel-heading"><h4>Create Sub-Section</h4></div>
		    <div class="panel-body">
      			<form id="set_inner_container" action="{% url 'edc_map:item_division_url' map_area %}?set_inner_container=set_inner_container&container_name={{container_name}}" method="post">
					{% csrf_token %}
					{% crispy form %}
				</form>
			</div>
        </div>
    </div>
    <div id="div-home-right" class="col-md-4">
        <div class="panel panel-warning">
        <div class="panel-heading">Statistics</div>
	        <div class="panel-body"> 
		        <ul class="nav nav-pills nav-stacked">
			        <li><b>Items in Containers: {{total_containers_items}}</b></li>
			        <li><b>Items in Inner Containers: {{total_inner_containers_items}}</b></li>
			        <li><b>Items not in Contained at all: {{total_items_not_contained}}</b></li>
			        <li><b>Items not in Inner Containers: {{total_containers_items_not_ininner_contained}}</b></li>
		        </ul>
	        </div>
        </div>
    </div>
    <div id="div-home-right" class="col-md-8">
         <div class="panel panel-default">
		    <div class="panel-heading"><h4>Push items to GPS Device</h4></div>
		    <div class="panel-body">
		      	<a href="{% url 'edc_map:items_to_gps_url' map_area %}" role="button" class="btn btn-primary">Load items to GPS</a>
			</div>
        </div>
    </div>
    {% if labels %}
    	<div id="div-home-right" class="col-md-8">
         <div class="panel panel-default">
		    <div class="panel-heading"><h4>{{map_area}}, 
		    {% if container_name %}
		    	Container {{container_name}}
		    {% endif %}
		    {% if inner_container_name %}
		    	Inner Container {{ inner_container_name }} total items: {{labels|length}}
		    {% endif %}</h4>
		    </div>
		    <table id="item-identifiers" class="table table-striped table-bordered" cellspacing="0" width="100%">
		        <thead>
		            <tr>
		                <th>Labels</th>
						<th>Container</th>
						<th>Inner Container</th>
		            </tr>
		        </thead>
		        <tfoot>
		            <tr>
		                <th>Labels</th>
		                <th>Container</th>
						<th>Inner Container</th>
		            </tr>
		        </tfoot>
		        <tbody>
					{% for label in labels %}
				      	<tr>
				      		<td>{{label}}</td>
				      		<td>{{container_name}}</td>
				      		<td>{{ inner_container_name }}</td>
				      	</tr>
		      		{% endfor %}
		        </tbody>
		    </table>
    	</div>
        </div>
    {% endif %}    
</div>
{% endblock main %}